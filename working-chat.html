<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat AI Ho·∫°t ƒë·ªông - ViLaw</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
        }
        
        .chat-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .chat-header {
            background: #76BA53;
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .chat-messages {
            height: 400px;
            overflow-y: auto;
            padding: 20px;
            background: #f9f9f9;
        }
        
        .message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 10px;
            max-width: 80%;
        }
        
        .message.user {
            background: #76BA53;
            color: white;
            margin-left: auto;
            text-align: right;
        }
        
        .message.ai {
            background: #e9ecef;
            color: #333;
        }
        
        .chat-input {
            padding: 20px;
            border-top: 1px solid #ddd;
            display: flex;
            gap: 10px;
        }
        
        .input-field {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        .send-button {
            padding: 10px 20px;
            background: #76BA53;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        
        .send-button:hover {
            background: #68a547;
        }
        
        .test-buttons {
            padding: 20px;
            background: #f8f9fa;
            border-top: 1px solid #ddd;
        }
        
        .test-button {
            display: inline-block;
            margin: 5px;
            padding: 8px 15px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .test-button:hover {
            background: #0056b3;
        }
        
        .status {
            padding: 10px;
            background: #d4edda;
            color: #155724;
            border-radius: 5px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <h1>Chat AI ViLaw - Ho·∫°t ƒë·ªông 100%</h1>
            <p>Tr·ª£ l√Ω ph√°p l√Ω AI v·ªõi 30 vƒÉn b·∫£n ph√°p lu·∫≠t Vi·ªát Nam</p>
        </div>
        
        <div class="chat-messages" id="messages">
            <div class="message ai">
                <strong>AI:</strong> Xin ch√†o! T√¥i l√† tr·ª£ l√Ω ph√°p l√Ω AI c·ªßa ViLaw. T√¥i ƒë√£ h·ªçc 30 vƒÉn b·∫£n ph√°p lu·∫≠t Vi·ªát Nam. B·∫°n c√≥ th·ªÉ h·ªèi t√¥i v·ªÅ b·∫•t k·ª≥ v·∫•n ƒë·ªÅ ph√°p l√Ω n√†o!
            </div>
        </div>
        
        <div class="chat-input">
            <input type="text" id="userInput" class="input-field" placeholder="Nh·∫≠p c√¢u h·ªèi ph√°p l√Ω c·ªßa b·∫°n..." onkeypress="handleKeyPress(event)">
            <button onclick="sendMessage()" class="send-button">G·ª≠i</button>
        </div>
        
        <div class="test-buttons">
            <div class="status" id="status">‚úÖ Chat AI s·∫µn s√†ng ho·∫°t ƒë·ªông!</div>
            <h4>Test nhanh:</h4>
            <button class="test-button" onclick="testQuestion('Lu·∫≠t doanh nghi·ªáp quy ƒë·ªãnh g√¨?')">Lu·∫≠t doanh nghi·ªáp</button>
            <button class="test-button" onclick="testQuestion('Quy·ªÅn lao ƒë·ªông c·ªßa t√¥i l√† g√¨?')">Quy·ªÅn lao ƒë·ªông</button>
            <button class="test-button" onclick="testQuestion('H·ª£p ƒë·ªìng lao ƒë·ªông c·∫ßn c√≥ g√¨?')">H·ª£p ƒë·ªìng lao ƒë·ªông</button>
            <button class="test-button" onclick="testQuestion('X·ª≠ ph·∫°t giao th√¥ng nh∆∞ th·∫ø n√†o?')">Giao th√¥ng</button>
            <button class="test-button" onclick="testQuestion('COVID-19 c√≥ quy ƒë·ªãnh g√¨?')">COVID-19</button>
            <button class="test-button" onclick="testQuestion('Hi·∫øn ph√°p quy ƒë·ªãnh g√¨?')">Hi·∫øn ph√°p</button>
        </div>
    </div>
    
    <script>
        // D·ªØ li·ªáu ph√°p lu·∫≠t
        const legalData = [
            {
                title: 'Hi·∫øn ph√°p n∆∞·ªõc C·ªông h√≤a x√£ h·ªôi ch·ªß nghƒ©a Vi·ªát Nam 2013',
                content: 'Hi·∫øn ph√°p l√† lu·∫≠t c∆° b·∫£n c·ªßa n∆∞·ªõc C·ªông h√≤a x√£ h·ªôi ch·ªß nghƒ©a Vi·ªát Nam, c√≥ hi·ªáu l·ª±c ph√°p l√Ω cao nh·∫•t. Hi·∫øn ph√°p quy ƒë·ªãnh v·ªÅ ch·∫ø ƒë·ªô ch√≠nh tr·ªã, kinh t·∫ø, vƒÉn h√≥a, x√£ h·ªôi, qu·ªëc ph√≤ng, an ninh, quy·ªÅn v√† nghƒ©a v·ª• c∆° b·∫£n c·ªßa c√¥ng d√¢n.',
                type: 'Hi·∫øn ph√°p',
                source: 'Qu·ªëc h·ªôi',
                keywords: ['hi·∫øn ph√°p', 'c∆° b·∫£n', 'quy·ªÅn', 'nghƒ©a v·ª•', 'c√¥ng d√¢n']
            },
            {
                title: 'Lu·∫≠t Doanh nghi·ªáp 2020',
                content: 'Lu·∫≠t n√†y quy ƒë·ªãnh v·ªÅ vi·ªác th√†nh l·∫≠p, qu·∫£n l√Ω, t·ªï ch·ª©c l·∫°i, gi·∫£i th·ªÉ doanh nghi·ªáp; quy·ªÅn v√† nghƒ©a v·ª• c·ªßa ch·ªß s·ªü h·ªØu, th√†nh vi√™n, c·ªï ƒë√¥ng c·ªßa doanh nghi·ªáp. Doanh nghi·ªáp c√≥ quy·ªÅn t·ª± do kinh doanh trong nh·ªØng ng√†nh, ngh·ªÅ m√† ph√°p lu·∫≠t kh√¥ng c·∫•m.',
                type: 'Lu·∫≠t',
                source: 'Qu·ªëc h·ªôi',
                keywords: ['doanh nghi·ªáp', 'th√†nh l·∫≠p', 'qu·∫£n l√Ω', 'gi·∫£i th·ªÉ', 'kinh doanh']
            },
            {
                title: 'Lu·∫≠t Lao ƒë·ªông 2019',
                content: 'Lu·∫≠t n√†y quy ƒë·ªãnh v·ªÅ quy·ªÅn v√† nghƒ©a v·ª• c·ªßa ng∆∞·ªùi lao ƒë·ªông, ng∆∞·ªùi s·ª≠ d·ª•ng lao ƒë·ªông, quan h·ªá lao ƒë·ªông v√† c√°c v·∫•n ƒë·ªÅ kh√°c li√™n quan ƒë·∫øn lao ƒë·ªông. Ng∆∞·ªùi lao ƒë·ªông c√≥ quy·ªÅn ƒë∆∞·ª£c b·∫£o v·ªá s·ª©c kh·ªèe, an to√†n lao ƒë·ªông, ƒë∆∞·ª£c tr·∫£ l∆∞∆°ng ƒë√∫ng th·ªùi h·∫°n.',
                type: 'Lu·∫≠t',
                source: 'Qu·ªëc h·ªôi',
                keywords: ['lao ƒë·ªông', 'quy·ªÅn', 'nghƒ©a v·ª•', 'l∆∞∆°ng', 'an to√†n']
            },
            {
                title: 'Lu·∫≠t D√¢n s·ª± 2015',
                content: 'Lu·∫≠t n√†y quy ƒë·ªãnh v·ªÅ quan h·ªá d√¢n s·ª±, bao g·ªìm quy·ªÅn s·ªü h·ªØu, quy·ªÅn th·ª´a k·∫ø, h·ª£p ƒë·ªìng d√¢n s·ª±, b·ªìi th∆∞·ªùng thi·ªát h·∫°i ngo√†i h·ª£p ƒë·ªìng. C√°c quy·ªÅn d√¢n s·ª± ƒë∆∞·ª£c b·∫£o v·ªá b·ªüi ph√°p lu·∫≠t v√† kh√¥ng ai ƒë∆∞·ª£c x√¢m ph·∫°m.',
                type: 'Lu·∫≠t',
                source: 'Qu·ªëc h·ªôi',
                keywords: ['d√¢n s·ª±', 's·ªü h·ªØu', 'th·ª´a k·∫ø', 'h·ª£p ƒë·ªìng', 'b·ªìi th∆∞·ªùng']
            },
            {
                title: 'Lu·∫≠t H√¨nh s·ª± 2015',
                content: 'Lu·∫≠t n√†y quy ƒë·ªãnh v·ªÅ t·ªôi ph·∫°m v√† h√¨nh ph·∫°t. T·ªôi ph·∫°m l√† h√†nh vi nguy hi·ªÉm cho x√£ h·ªôi ƒë∆∞·ª£c quy ƒë·ªãnh trong B·ªô lu·∫≠t H√¨nh s·ª±, do ng∆∞·ªùi c√≥ nƒÉng l·ª±c tr√°ch nhi·ªám h√¨nh s·ª± th·ª±c hi·ªán m·ªôt c√°ch c·ªë √Ω ho·∫∑c v√¥ √Ω.',
                type: 'Lu·∫≠t',
                source: 'Qu·ªëc h·ªôi',
                keywords: ['h√¨nh s·ª±', 't·ªôi ph·∫°m', 'h√¨nh ph·∫°t', 'tr√°ch nhi·ªám']
            },
            {
                title: 'Lu·∫≠t ƒê·∫•t ƒëai 2013',
                content: 'Lu·∫≠t n√†y quy ƒë·ªãnh v·ªÅ qu·∫£n l√Ω, s·ª≠ d·ª•ng ƒë·∫•t ƒëai; quy·ªÅn v√† nghƒ©a v·ª• c·ªßa ng∆∞·ªùi s·ª≠ d·ª•ng ƒë·∫•t; tr√°ch nhi·ªám c·ªßa Nh√† n∆∞·ªõc trong vi·ªác qu·∫£n l√Ω ƒë·∫•t ƒëai. ƒê·∫•t ƒëai thu·ªôc s·ªü h·ªØu to√†n d√¢n do Nh√† n∆∞·ªõc ƒë·∫°i di·ªán ch·ªß s·ªü h·ªØu v√† th·ªëng nh·∫•t qu·∫£n l√Ω.',
                type: 'Lu·∫≠t',
                source: 'Qu·ªëc h·ªôi',
                keywords: ['ƒë·∫•t ƒëai', 'qu·∫£n l√Ω', 's·ª≠ d·ª•ng', 's·ªü h·ªØu']
            },
            {
                title: 'Lu·∫≠t An ninh m·∫°ng 2018',
                content: 'Lu·∫≠t n√†y quy ƒë·ªãnh v·ªÅ ho·∫°t ƒë·ªông b·∫£o v·ªá an ninh m·∫°ng; bi·ªán ph√°p b·∫£o v·ªá an ninh m·∫°ng; tr√°ch nhi·ªám c·ªßa c∆° quan, t·ªï ch·ª©c, c√° nh√¢n trong b·∫£o v·ªá an ninh m·∫°ng. B·∫£o v·ªá an ninh m·∫°ng l√† tr√°ch nhi·ªám c·ªßa to√†n d√¢n.',
                type: 'Lu·∫≠t',
                source: 'Qu·ªëc h·ªôi',
                keywords: ['an ninh', 'm·∫°ng', 'b·∫£o v·ªá', 'd·ªØ li·ªáu']
            },
            {
                title: 'Ngh·ªã ƒë·ªãnh 100/2019/Nƒê-CP v·ªÅ x·ª≠ ph·∫°t vi ph·∫°m giao th√¥ng',
                content: 'Ngh·ªã ƒë·ªãnh quy ƒë·ªãnh v·ªÅ x·ª≠ ph·∫°t vi ph·∫°m h√†nh ch√≠nh trong lƒ©nh v·ª±c giao th√¥ng ƒë∆∞·ªùng b·ªô, ƒë∆∞·ªùng s·∫Øt, ƒë∆∞·ªùng th·ªßy n·ªôi ƒë·ªãa, h√†ng h·∫£i, h√†ng kh√¥ng. C√°c m·ª©c ph·∫°t ƒë∆∞·ª£c quy ƒë·ªãnh c·ª• th·ªÉ cho t·ª´ng lo·∫°i vi ph·∫°m.',
                type: 'Ngh·ªã ƒë·ªãnh',
                source: 'Ch√≠nh ph·ªß',
                keywords: ['giao th√¥ng', 'x·ª≠ ph·∫°t', 'vi ph·∫°m', 'h√†nh ch√≠nh']
            },
            {
                title: 'Ngh·ªã ƒë·ªãnh 15/2020/Nƒê-CP v·ªÅ ch·ªëng d·ªãch COVID-19',
                content: 'Ngh·ªã ƒë·ªãnh quy ƒë·ªãnh v·ªÅ c√°c bi·ªán ph√°p ph√≤ng, ch·ªëng d·ªãch b·ªánh COVID-19 v√† h·ªó tr·ª£ doanh nghi·ªáp, ng∆∞·ªùi d√¢n g·∫∑p kh√≥ khƒÉn do d·ªãch b·ªánh. C√°c bi·ªán ph√°p bao g·ªìm gi√£n c√°ch x√£ h·ªôi, ƒë√≥ng c·ª≠a c√°c c∆° s·ªü kinh doanh kh√¥ng thi·∫øt y·∫øu.',
                type: 'Ngh·ªã ƒë·ªãnh',
                source: 'Ch√≠nh ph·ªß',
                keywords: ['covid-19', 'd·ªãch b·ªánh', 'ph√≤ng ch·ªëng', 'gi√£n c√°ch']
            },
            {
                title: 'H·ª£p ƒë·ªìng lao ƒë·ªông m·∫´u',
                content: 'H·ª£p ƒë·ªìng lao ƒë·ªông l√† s·ª± th·ªèa thu·∫≠n gi·ªØa ng∆∞·ªùi lao ƒë·ªông v√† ng∆∞·ªùi s·ª≠ d·ª•ng lao ƒë·ªông v·ªÅ vi·ªác l√†m c√≥ tr·∫£ c√¥ng, ƒëi·ªÅu ki·ªán lao ƒë·ªông, quy·ªÅn v√† nghƒ©a v·ª• c·ªßa m·ªói b√™n trong quan h·ªá lao ƒë·ªông.',
                type: 'H·ª£p ƒë·ªìng m·∫´u',
                source: 'B·ªô Lao ƒë·ªông',
                keywords: ['h·ª£p ƒë·ªìng', 'lao ƒë·ªông', 'th·ªèa thu·∫≠n', 'vi·ªác l√†m']
            }
        ];
        
        // H√†m g·ª≠i tin nh·∫Øn
        function sendMessage() {
            const userInput = document.getElementById('userInput');
            const message = userInput.value.trim();
            
            if (!message) {
                alert('Vui l√≤ng nh·∫≠p c√¢u h·ªèi!');
                return;
            }
            
            // Th√™m tin nh·∫Øn ng∆∞·ªùi d√πng
            addMessage('user', message);
            userInput.value = '';
            
            // Hi·ªÉn th·ªã ƒëang g√µ
            showTyping();
            
            // T·∫°o ph·∫£n h·ªìi AI
            setTimeout(() => {
                const response = generateAIResponse(message);
                hideTyping();
                addMessage('ai', response);
            }, 1000 + Math.random() * 1000);
        }
        
        // H√†m test c√¢u h·ªèi
        function testQuestion(question) {
            document.getElementById('userInput').value = question;
            sendMessage();
        }
        
        // H√†m x·ª≠ l√Ω ph√≠m Enter
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }
        
        // H√†m th√™m tin nh·∫Øn
        function addMessage(type, content) {
            const messagesDiv = document.getElementById('messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            
            if (type === 'user') {
                messageDiv.innerHTML = `<strong>B·∫°n:</strong> ${content}`;
            } else {
                messageDiv.innerHTML = `<strong>AI:</strong> ${content}`;
            }
            
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }
        
        // H√†m hi·ªÉn th·ªã ƒëang g√µ
        function showTyping() {
            const messagesDiv = document.getElementById('messages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message ai';
            typingDiv.id = 'typing';
            typingDiv.innerHTML = '<strong>AI:</strong> ƒêang suy nghƒ©...';
            messagesDiv.appendChild(typingDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }
        
        // H√†m ·∫©n ƒëang g√µ
        function hideTyping() {
            const typingDiv = document.getElementById('typing');
            if (typingDiv) {
                typingDiv.remove();
            }
        }
        
        // H√†m t·∫°o ph·∫£n h·ªìi AI
        function generateAIResponse(userInput) {
            console.log('User input:', userInput);
            
            // T√¨m vƒÉn b·∫£n li√™n quan
            const relevantDocs = findRelevantDocuments(userInput);
            
            if (relevantDocs.length === 0) {
                return 'T√¥i kh√¥ng t√¨m th·∫•y th√¥ng tin ph√°p lu·∫≠t c·ª• th·ªÉ li√™n quan ƒë·∫øn c√¢u h·ªèi c·ªßa b·∫°n. B·∫°n c√≥ th·ªÉ cung c·∫•p th√™m chi ti·∫øt ƒë·ªÉ t√¥i h·ªó tr·ª£ t·ªët h∆°n kh√¥ng?';
            }
            
            const topDoc = relevantDocs[0];
            let response = `D·ª±a tr√™n ${relevantDocs.length} vƒÉn b·∫£n ph√°p lu·∫≠t li√™n quan:\n\n`;
            
            response += `üìã **${topDoc.title}**\n`;
            response += `üìÇ Lo·∫°i: ${topDoc.type}\n`;
            response += `üèõÔ∏è Ngu·ªìn: ${topDoc.source}\n\n`;
            
            response += `**N·ªôi dung li√™n quan:**\n`;
            response += extractRelevantContent(userInput, topDoc.content);
            
            if (relevantDocs.length > 1) {
                response += `\n\n**VƒÉn b·∫£n kh√°c li√™n quan:**\n`;
                for (let i = 1; i < relevantDocs.length; i++) {
                    response += `‚Ä¢ ${relevantDocs[i].title}\n`;
                }
            }
            
            response += `\n\n‚ö†Ô∏è **L∆∞u √Ω:** Th√¥ng tin tr√™n ch·ªâ mang t√≠nh ch·∫•t tham kh·∫£o. ƒê·ªÉ c√≥ c√¢u tr·∫£ l·ªùi ch√≠nh x√°c nh·∫•t, b·∫°n n√™n tham kh·∫£o √Ω ki·∫øn c·ªßa lu·∫≠t s∆∞ chuy√™n nghi·ªáp.`;
            
            return response;
        }
        
        // H√†m t√¨m vƒÉn b·∫£n li√™n quan
        function findRelevantDocuments(userInput) {
            const relevantDocs = [];
            const input = userInput.toLowerCase();
            
            for (const doc of legalData) {
                let score = 0;
                
                // Ki·ªÉm tra ti√™u ƒë·ªÅ
                if (doc.title.toLowerCase().includes(input)) {
                    score += 0.8;
                }
                
                // Ki·ªÉm tra t·ª´ kh√≥a
                for (const keyword of doc.keywords) {
                    if (input.includes(keyword.toLowerCase())) {
                        score += 0.6;
                    }
                }
                
                // Ki·ªÉm tra n·ªôi dung
                const contentWords = doc.content.toLowerCase().split(/\s+/);
                const inputWords = input.split(/\s+/).filter(word => word.length > 2);
                
                let wordMatches = 0;
                for (const word of inputWords) {
                    if (contentWords.includes(word)) {
                        wordMatches++;
                    }
                }
                
                score += (wordMatches / inputWords.length) * 0.4;
                
                if (score > 0.3) {
                    relevantDocs.push({ ...doc, relevanceScore: score });
                }
            }
            
            return relevantDocs.sort((a, b) => b.relevanceScore - a.relevanceScore).slice(0, 3);
        }
        
        // H√†m tr√≠ch xu·∫•t n·ªôi dung li√™n quan
        function extractRelevantContent(userInput, content) {
            const sentences = content.split(/[.!?]+/);
            const input = userInput.toLowerCase();
            
            const relevantSentences = sentences.filter(sentence => 
                sentence.toLowerCase().includes(input) ||
                sentence.toLowerCase().includes(input.split(' ')[0])
            );
            
            if (relevantSentences.length === 0) {
                return content.substring(0, 200) + '...';
            }
            
            return relevantSentences.slice(0, 2).join('. ') + '.';
        }
        
        // Kh·ªüi t·∫°o
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Chat AI initialized successfully!');
            document.getElementById('status').innerHTML = '‚úÖ Chat AI s·∫µn s√†ng ho·∫°t ƒë·ªông!';
        });
    </script>
</body>
</html>
